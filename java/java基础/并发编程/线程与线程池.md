#### 线程

- Java使用Thread管理线程，创建Thread时JVM会在专门保留的内存区域中分配一大块空间。包含许多内容
  - 程序计数器，指示要执行的下一条字节码
  - 支持Java代码执行的栈，包含线程到达当前执行结点**前所调用过的方法的相关信息**以及正在执行的方法的本地变量（基本类型和对象引用）
    - 堆由所有线程共享
  - 本地代码栈
  - 本地线程变量存储
  - 用于控制线程的状态维护变

- 获取机器上的处理器数量`Runtime.getRuntime().availableProcessors();`
  - 通常来说**线程的最佳数目就是可用处理器的数量**
  - 由于超线程只是会大幅加快上下文切换的速度，而并不会增加实际的计算吞吐量。因此设置计算密集型程序时不应该考虑超线程
  - 大部分情况由JVM决定即可

#### 死锁

- 循环等待造成无限循环
- 死锁发生的条件
  - 互斥：任务使用的**至少一项资源不是共享的**（即同一时间只能被一个对象使用，其他对象必须等待）
  - 至少一个任务必须**持有**一项资源，并且**等待**正在被另一个任务持有的资源。
  - 不能从一个任务中夺走一项资源。
  - 会发生循环等待。