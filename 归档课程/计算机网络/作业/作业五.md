#### R5

- 根据上课讲的内容，如果是实时语音、图像的传输，通常会使用UDP进行传输，因为在大部分这类的通讯场景中速度与延迟远比准确性要重要，偶尔出现一些传输错误是可以忍受的。
- 但是题目中说在语音和图像流量发送上TCP比UDP更为常用，我认为可能是非实时类的需求比实时类的（如直播）需求更多导致的，对于非及时的应用如邮件等不太重视速度与延迟，更注重准确与安全，因此在这些领域会主要使用TCP。
- 此外，经查询得知，TCP协议提供了可靠的数据传输和流量控制机制，可以更好地防止网络攻击和滥用。因此网络管理员会更倾向于允许TCP流量通过防火墙和安全设备，而限制UDP流量的传输。

#### R8

- 首先Web服务器通常使用TCP协议传输，因此根据TCP的规则进行分析
- TCP的套接字由四部分（源端口，源ip，目的端口，目的ip）组成，虽然不同的对c的请求由相同的目的ip和目的端口，但是其来源ip/端口是不同的，因此具有不同的套接字
- 这两个个套接字的目的端口都是80，但是源端口是不确定的，可能也是80，也可能不是

#### R14

- a：错误，主机B虽然没有数据要发送，但仍应该回复ACK
- b：错误，rwnd的长度会根据接收方的情况动态变化
- c：正确，发送但未被确认的部分一定在窗口中，而窗口的长度不会超过接受方的缓存大小，因此不会发生溢出
- d：错误，这个序号始于文件大小相关的，不一定是m+1
- e：正确
- f：错误，如果之前的EstimatedRTT和DevRTT非常小，那么即使SampleRTT为1，新的EstimatedRTT仍可能小于1
- g：错误，确认好an与报文段序号sn没有关系

#### P1

- 经查询，在talnet协议中本地主机可以使用动态端口号，而远程主机使用静态的23号端口

- a:
  - 8080->23
- b:
  - 8000->23
- c:
  - 23->8080
- d:
  - 23->8000
- e:
  - 这没有限制，两个客户机的端口号是可以相同的
- f:
  - 如果是同一台主机那么也就说明他们具有相同的ip，因此端口号一定不同，否则TCP套接字就完全相同无法区分了

#### P19

- 发送方
  - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230502000927062.png" alt="image-20230502000927062" style="zoom:50%;" />
- 接收方
  - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230502001000030.png" alt="image-20230502001000030" style="zoom: 33%;" />
- 报文格式与普通的rdt3.0类似，只是对于ack除了标记序号外还应该用1比特标记来源（如B还是C），使得A可以判断是否收到了全部的ack，从而确定发送是否已经完成，以及是否需要重新发送。

#### P27

- a：
  - 序号：207；源端口号：302；目的端口号：80；

- b：
  - 确认号：207；源端口号：80；目的端口号：302；

- c：
  - 确认号：127；

- d：
  - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230508191053351.png" alt="image-20230508191053351" style="zoom: 33%;" />


#### P32

- a：
  - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230508192313156.png" alt="image-20230508192313156" style="zoom:50%;" />

- b：
  - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230508192651845.png" alt="image-20230508192651845" style="zoom:50%;" />

- c：
  - 每到来一个新的数据，旧的数据的权重就会乘以(1-a)即呈指数递减，因此称为指数移动平均。


#### P40

- a：
  - [1,6] [23,26]

- b：
  - [6,16] [17,22]

- c：
  - 3个冗余ACK，因为如果是丢失CWND会变成1重新开始慢启动

- d：
  - 超时检测，因为CWND变成了1重新开始慢启动

- e：
  - 32，在第6个传输轮回时达到了ssthresh开始了拥塞避免

- f：
  - 21，在第16个传输轮回出现3个冗余ACK，ssthresh=CWND/2=21

- g：
  - 14，在第22个传输轮回出现3个冗余ACK，ssthresh=CWND/2=14

- h：
  - 1+2+4+8+16+32=63<70
  - 63+33=96>70
  - 因此在第7个传输轮回发送

- i：
  - CWND=8/2=4
  - ssthresh=CWND+3=7

- j：
  - CWND=4
  - ssthresh=21

- k：
  - 1+2+4+8+16+21（ssthress）= 52


#### P45

- a：
  - 由于宏观描述中忽略了较快的指数增加阶段，只考虑拥塞抑制阶段，因此每个轮回发送的包数呈等差数列
  - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230508203156258.png" alt="image-20230508203156258" style="zoom:50%;" />

- b：
  - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230508203631286.png" alt="image-20230508203631286" style="zoom:50%;" />


#### P46

- a：
  - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230508204131969.png" alt="image-20230508204131969" style="zoom: 50%;" />
    - 联立速率即可得到125

- b：
  - 使用宏观描述方法进行估计
  - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230508204633098.png" alt="image-20230508204633098" style="zoom:50%;" />

- c：
  - 125/2=62
  - （125-62+1）*0.15=9.6s


#### P50

- a：

  - | 时间（ms） | C1   | C2   |
    | ---------- | ---- | ---- |
    | 0          | 10   | 10   |
    | 50         | 5    | /    |
    | 100        | 2    | 5    |
    | 150        | 1    | /    |
    | 200        | 1    | 2    |
    | 250        | 1    | /    |
    | 300        | 1    | 1    |
    | 350        | 2    | /    |
    | 400        | 1    | 1    |
    | 450        | 2    | /    |
    | 500        | 1    | 1    |
    | 550        | 2    | /    |
    | 600        | 1    | 1    |
    | 650        | 2    | /    |
    | 700        | 1    | 1    |
    | 750        | 2    | /    |
    | 800        | 1    | 1    |
    | 850        | 2    | /    |
    | 900        | 1    | 1    |
    | 950        | 2    | /    |
    | 1000       | 1    | 1    |

  - 由此可知1000ms后窗口长度都为1

- b：

  - 不能，由表可知经过一段时候两个窗口的长度进入循环，C1在1和2之间交替变化，C2始终为1，并且C1的RTT小于C2因此C1的传输速率时钟大于C2，不可能享有相同的带宽


#### P52

- <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230508211401037.png" alt="image-20230508211401037" style="zoom:50%;" />
- ![image-20230508211657620](https://thdlrt.oss-cn-beijing.aliyuncs.com/image-20230508211657620.png)