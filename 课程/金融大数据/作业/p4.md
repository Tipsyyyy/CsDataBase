##### 田昊东211275022

#### 简述HDFS中NameNode、DataNode的SecondaryNamedNode的作用

##### NameNode

- 负责管理分布式文件系统的命名空间，并保存了两个核心的数据结构，
  FsImage和EditLog
  - FsImage用于维护文件系统树以及文件树中所有的文件和文件夹的元数据
  - 操作日志文件EditLog中记录了所有针对文件的创建、删除、重命名等操作

##### SecondaryNamedNode

- 用来保存NameNode中对HDFS 元数据信息的备份，并减少名称节点重
  启的时间。
- SecondaryNamedNode会定期和NameNode通信。获取到FsImage和EditLog文件，并下载到本地的相应目录下，执行EditLog和FsImage文件合并，最后将新的FsImage文件发送到NameNode节点上
- 可以防止日志文件 EditLog 过大，导致名称节点失败恢复时消耗过多时间，并起到备份的作用。

##### DataNode

- 负责存储和读取数据块。每个 DataNode 都会定期向 NameNode 发送心跳消息和块报告，以表明自己的状态和存储的数据块。DataNode 还会根据 NameNode 的指令执行数据块的复制、删除、移动等操作。DataNode 是 HDFS 的基础组件，它们可以水平扩展以提高存储容量和吞吐量。

#### 简述HDFS是如何应对NameNode和DataNode出错的

##### NameNode

- HDFS设置了备份机制，除了在NameNode存储FsImage和Editlog数据外，还把这些核心文件同步复制到备份服务器SecondaryNameNode上。当NameNode出错时，就可以根据备份服务器SecondaryNameNode中的FsImage和Editlog数据进行恢复。

##### DataNode

- 每个数据节点会定期向NameNode发送“心跳”信息，向名称节点报告自己的状态。
- 当数据节点发生故障，或者网络发生断网时，名称节点就无法收到来自一些数据节点的心跳信息，这时，这些数据节点就会被标记为“宕机”，节点上面的所有数据都会被标记为“不可读”，名称节点不会再给它们发送任何I/O请求。
- 此外，如果由于节点失效而导致冗余副本数目不足，就会启动数据冗余复制，为它生成新的副本。

##### DataNode存储的数据出错

- 在文件被创建时，客户端就会对每一个文件块进行信息摘录，并把这些信息写入到同一个路径的隐藏文件里面。当客户端读取文件的时候，会先读取该信息文件，然后利用该信息文件对每个读取的数据块进行校验，如果校验出错，客户端就会请求到另外一个数据节点读取该文件块，并且向名称节点报告这个文件块有错误，名称节点会定期检查并且重新复制这个块。

#### 简述YARN的设计目标以及如何实现该目标的

- 设计目标：在一个集群上部署一个统一的资源调度管理框架YARN，在YARN之上可以部署其他各种计算框架。
- 实现：
  - 扩展了任务调度方式：引入RM、RA，ResourceManager (RM)全局管理所有应用程序计算资源的分配，每个应用的ApplicationMaster (AM)负责相应的调度和协调。用户可以针对不同的编程模型编写自己的ApplicationMaster，让更多的编程模型运行在Hadoop集群中。
  - 由YARN为这些计算框架提供统一的资源调度管理服务，并且能够根据各种计算框架的负载需求，调整各自占用的资源，实现集群资源共享和资源弹性收缩。
  - 可以实现一个集群上的不同应用负载混搭，有效提高了集群的利用率。
  - 不同计算框架可以共享底层存储，避免了数据集跨集群移动。