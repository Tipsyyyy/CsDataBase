{"path":"课程/数字逻辑与计算机组成/课件/第4章 时序逻辑电路（1）.pdf","text":"第4章 时序逻辑电路 第一讲 时序逻辑电路概述 第二讲 锁存器和触发器 第三讲 同步时序电路设计 第四讲 典型时序逻辑部件设计 第一讲 时序逻辑电路概述 2  时序逻辑与有限状态机  时序逻辑电路的基本结构  时序逻辑电路的定时 1 时序逻辑电路概述  组合逻辑：输出结果仅取决于当前的输入信号  时序逻辑：输出结果不仅取决于当前时刻的输入值，而且取决 于电路过去时刻的行为（当前状态、现态、旧状态） • 电路中有存储元件，用于存储逻辑信号的值，表示电路过 去时刻的行为（当前状态、现态、旧状态） • 当电路输入值发生变化时，新的输入值可能使得电路保持 当前状态，也可能使得电路状态发生改变，进入新的状态 3 如,电视机的音量控制 通过音量按钮“+”和“-”输入当前信号，得到的下一次音量 （下一个状态）由原音量（当前状态）和当前所按按钮决定 如何有效反映下一状态和当前状态及当前输入之间的转换关系呢？ 1.1 有限状态机 有限状态机（Finite State Machine，FSM）是一种刻画状态 以及状态转换的理论工具。 通常用状态图描述有限状态机。 • 状态：用包含状态符号的圆圈表示 • 状态转换方向：用有向边表示，并在边上标注引起状态变换 的输入信号值和相应输出（若输出只与当前状态有关，则把 输出标注在状态圆圈中） 4 0/1 0/0 S3S2S1 0/1 0/1 S2 1 1/1 1.1 有限状态机—状态图 例：检测输入序列是否为连续4个“1” A-初始态：若输入1，则转B B-连续1个“1”：若输入1，则转C C-连续2个“1”：若输入1，则转D D-连续3个“1”：若输入1，则状态不变 并输出为1（表示检测到连续4个1） 任何状态下，输入0都会转到初态A 5 如何用数字逻辑实现有限状态机呢？ 1.1 用数字逻辑实现有限状态机  用数字逻辑实现一个有限状态机，需要完成的主要工作： • 把状态机的输入、输出以及内部状态都转换成二进制表示。这 里的关键是状态的二进制编码。 • 设计一种状态记忆电路（存储元件） 。使用双稳态器件记忆状 态，如SR锁存器、D触发器、JK触发器等； • 设计状态记忆电路的激励函数（根据当前输入把旧状态改为新 状态的函数）和输出函数（根据旧状态和当前输入来改变电路 输出结果的函数），并完成定时分析。 6 能完成上述工作（实现有限状态机）的数字逻辑电路一定是 一个时序逻辑电路！ 1.2 时序逻辑电路基本结构  时序逻辑电路的一般结构 • 状态记忆模块：由多个状态记忆单元构成（存储元件） • 次态激励逻辑模块F ：激励函数（现态和外部输入的逻辑函数） • 输出逻辑模块G ：输出函数（现态和外部输入的逻辑函数） Mealy型：输出依赖于当前状态和当前输入信号 Moore型：输出仅依赖于当前状态，和当前输入信号无关 7属于Mealy型时序逻辑电路 输出=G(现态,输入) 标准脉冲信号 1.2 时序逻辑电路基本结构  Moore型：输出信号仅依赖于当前状态。 8 输出=G(现态)  根据状态转换方式的不同有同步时序逻辑电路和异步时序逻辑电路 • 同步时序逻辑电路：在统一的时钟信号控制下进行状态转换 • 异步时序逻辑电路：没有统一的时钟信号来控制状态的改变 • Clk：固定周期的标准脉冲信号 补：时钟脉冲 按一定电压幅度、按固定时间间隔、连续发出的脉冲信号。  时钟都是通过振荡器产生的。振荡器有很多种，根据不同的时钟需求会使 用不同的振荡器。  原始时钟信号一般会通过晶体振荡器产生。根据晶体特性存在一个谐振频 率，而且品质因子（目标频率能量占总能量的比值）非常高。从而能够产 生一个噪声非常小、震荡频率非常精确的时钟信号。 时钟脉冲之间的时间间隔称为时钟周期。单位是秒。 通常将1秒内所产生的脉冲个数称为时钟频率。单位是Hz 计算机中的系统时钟就是一个典型的、频率精确和稳定的脉 冲信号发生器。 1.3 时序逻辑电路的定时  什么时候状态会发生变换？电平触发或边沿触发  边沿触发方式分为上升沿触发和下降沿触发两种类型 10 上升沿/ 正边沿 下降沿/ 负边沿 时钟周期 时钟周期 时钟频率=1/时钟周期 (占空比，工作循环) 第二讲 锁存器和触发器 11  双稳态元件  SR锁存器  D锁存器  D触发器  T触发器 2.1 双稳态元件  用于存储1位二进制数据，有两个互补的输出状态 • 状态 1 ：置位(Set)状态，表示存储逻辑“1” • 状态 0 ：复位(Reset)状态，表示存储逻辑“0”  双稳态元件的简单实现 • 串联两个反相器，则反相器的输出状态不同，且保持稳定 • Q为高电平时，为置位状态；Q为低电平时，为复位状态 12 1 0 0 1 0 1 1 0 交叉耦合 Q Q Vin1 A B Vout1 Vin2 Vout2 注意：输出当然可以、而 且必须回送端 2.1 双稳态元件  用两个反相器串联构建的 双稳态元件无法改变电路状态  用1个或多个输入信号能驱动 双稳态元件进入稳定状态，这 些输入信号称为激励信号 或激励输入。  通常根据不同的激励输入信号来命名存储元件，如SR、JK、D、 T 等不同的激励输入信号  根据触发方式的不同，基于双稳态元件的构建思路，可以实现两 种类型的存储元件： • 用激励信号的电平触发：锁存器(latch) • 用时钟信号的边沿触发：触发器(flip-flop) 13 Q Q Vin1 A B Vout1 Vin2 Vout2 2.1 双稳态元件-锁存器  锁存器 （latch) ：通过激励输入的电平信号来控制存储元件的状态  置位复位锁存器(Set-Reset latch)：具有置位和复位激励信号 • 置位激励信号Set有效时，强制存储元件的输出Q为1 • 复位激励信号Reset有效时，强制存储元件的输出Q为0 14 接受Set信 号，Q变化， 然后稳定 接受Reset信 号，Q变化， 然后稳定 2.1 双稳态元件-触发器  触发器 flip-flop • 具有时钟控制信号(clock) • 通过时钟信号的边沿来触发存储元件改变状态 15 Set信号有效， 但必须等到时 钟边沿到来， Q才变化 Set信号有效， 但没有时钟边沿 到来，Q不变 2.2 SR锁存器  SR锁存器：使用一对交叉耦合的或非门构成双稳态电路，也称为置 位-重置（复位）锁存器。S是置位输入端，R是重置输入端 16 交叉耦合 S Q R �Q 逻辑符号 R=S=1时，Q、�𝐐𝐐状态不相反，无效 功能表 2.2 SR锁存器  状态图 17 0 1 S=1,R=0 S=0,R=1 S=X R=0 S=0 R=X 置位态复位态 X 0 0 1 1 0 0 1 0 1 0 1 0 1 2.2 SR锁存器  通过状态变化来描述时序电路  构建状态表 • 顶部为输入信号，左侧为现态Q • 右侧填入次态Q*和输出信号 - （右表中没有“输出”）  在置位态下，若R输入变为高电平，则经过两级门延迟变为复位态  从输入驱动信号有效开始，到  输出达到稳定为止有一定的延  迟，这个延迟称为触发延迟或  锁存延迟。 18 0 1 现态 Q 输入RS 00 01 10 11 状态表 0 1 0 0* 1 1 0 0* 1 0 1 0 1 0 0 1 2.2 SR锁存器  状态表转换成状态转移表 19 0 1 现态 Q 输入RS 00 01 10 11 状态表 0 1 0 0* 1 1 0 0* 次态Q* 0 0 0 0 0 1 0 1 0 0 1 1 1 0 0 1 0 1 1 1 0 1 1 1 0 1 0 0 1 1 0* 0* S R 现态Q 次态Q* 状态转移表 Q* = S + �R·Q S·R ≠ 1 次态 方程 约束条件 状态图、状态表、 特征方程之间可 相互转换！ 功能：SR锁存器只有状态，没有输出，常用来设置标志位 d d  次态（特征）方程 2.3 D锁存器  如何利用锁存器来存储信息位？ 20 D = 1 时，Q = 1 Q Q S R D C 数据 输入端 使能控 制端 C=0时, 电路 状态（Q和Q~） 保持不变 也就是：Q = D 电路状态随输入而改变 C=1时, D = 0 时，Q = 0 0 1 Q~ 1 Q 0+Q 0+Q~ Q Q S R D C 1 0 0 1 1 1 0 1 S=1 R=0 2.3 D锁存器 21 Q Q D C 数据 输入端 使能端 电平控制 C=0时, 电路状态保持不变 C=1时, 只有一个数据输入端D，称为D锁存器，也称为透明锁存器 D Q C �𝐐𝐐 逻辑符号 C D Q Q 0 X 保 持 1 0 0 1 1 1 1 0 D锁存器功能表 将数据端D锁存 （输入D让电路状态改变了） 特征方程：Q* = D（C=1） 0 1 D=1 D=0 D=1D=0 0 1 D 0 1 Q* 状态转移表 2.3 D锁存器  D锁存器状态转移表、状态图和次态（特征）方程 22 状态图  D锁存器的时序图 D C Q 使能控制 高电平有效 回顾第9次课  时序逻辑电路的四个要素：输入、现态  输出、新态 （都是二进制编码）  时序逻辑电路的三个模块： • 激励函数，次态/特征方程：新态 = G（输入，现态），新态 = G（现态） • 输出函数： 输出 = F（输入，现态） • 状态记忆模块： 存储元件（双稳态元件）  功能表，状态图，状态表，状态转移表（可互相转换）  注意：每个状态都可以在某个时刻作为现态、在下一时刻作为新态  时钟：时钟周期，时钟频率，高低电平，上升沿，下降沿  SR锁存器，D锁存器 高（低）电平触发：只要维持在高（低）电平，对电路影响就一直有效 时钟边沿触发：只在上升（下降）沿到来的时刻，对电路产生影响 组合逻 辑实现 D Q C �𝐐𝐐 S Q R �Q 回顾&补充 第9次课（续）  最简单的时序逻辑电路：存储元件（锁存器，触发器） • 由很简单的少量逻辑门构成，交叉耦合，实现双稳态（虽然下次状态 和当前状态不直接相关，但仍然算是一种特殊的时序逻辑电路） • 加电后，电路一直工作，在激励信号符合要求（可变可不变）的情况 下，输出一直不变（所以Q的值一直稳定输出，此即为【存储】） • 电路中每条线路的数据会在什么时候稳定，此即为【时序分析】 • 组合逻辑电路中，输入不变，输出才不变，按表达式计算，非存储  典型的时序逻辑电路（例如寄存器）：0或若干逻辑门+若干存储元件  复杂的时序逻辑电路（例如CPU）：复杂的组合逻辑+很多存储元件 2.4 D触发器——开始有时钟信号了！  由一对主、从D锁存器构成 25 CLK 主锁存器 从锁存器 L 写入 QM变为D 不变 Q=last 上升沿 锁存 QM=D 写入 Q变为QM H 不变 QM=D 不变 Q=QM  从锁存器在时钟CLK的上升沿到来时采样主锁存器的输出QM的值， 并确定Q和QN的输出 主 从 此时主锁存器是在写入的（C为高电 平），但不影响最后输出的Q 此时从锁存器是在持续写入的，但一 定是在之前上升沿到来之后就完成了， 所以也就相当于是保持不变了 从锁存器完成写入 2.4 D触发器 D触发器符号  由一对主、从D锁存器构成 26 主 从  D触发器次态（特征）方程: Q* = D  状态图 D锁存器还要强调C=1 这里不用强调时钟信号了 2.4 D触发器  从时钟触发边沿到来,到输出端Q改变为D值的时间称为锁存延迟tCQ （latch prop), 即CLKQ时间，分tpLH(CQ)、tpHL(CQ)两种时间 27 tpLH(CQ) tpHL(CQ) tsetup 建立时间 thold 保持时间 D CLK Q 窗口期内D输入的改 变导致输出不可预测  建立时间tsetup：输入信号D在时钟边沿到达前需稳定的时间  保持时间thold ：输入信号D在时钟边沿到达后需继续稳定的时间 提示: 此时主锁存器是在写入的！要等它写完 提示：要等从锁存器完成写入！ 2选1 多路选择器 2.4 带使能端的D触发器  通过使能端EN信号来控制是否在时钟信号的触发边沿进行数据的存储。 28 D Q CLK Q D EN CLK Q QN EN有效（=1） 选择外部D输入 EN无效（=0） 保持触发器当前的输出 D Q EN CLK Q 逻辑符号 CLK Q QN D 2.4具有预置和清零（复位）端的 D触发器 • 预置端PR（preset）：将Q置1 • 清零端CLR（clear）：将Q清0 在电路工作的最开始进行置位或清0 29 PR_L CLR_L PR D Q CLK Q CLR 预置端和清零端有同步、异步之分。同步方式下只能在CLK的触发边沿进行预 置和清零，异步方式下与时钟信号无关 预置端和 清零(复位) 端都是低 电平有效 信号 1 1 0 1 0 0 1 1 1 1 2.5 T触发器 30  T触发器：在每个时钟脉冲T的触发边沿都会改变状态 基于D触发器实现；可用于实现计数器、分频器等功能 简单小结 31  SR锁存器  置位端(S)/复位端(R)；用于设置标志信息  D锁存器  控制端C有效时，锁存数据D  D触发器  时钟触发边沿开始后，经过Clk-Q时间，Q变成D；输入端D在时钟触 发边沿到来前，须稳定Setup时间；之后须继续保持hold时间  可带EN控制端、置位/清零控制端  T触发器  由D触发器构成，T连接Clk，D连接Q，每个时钟发生状态变化","libVersion":"0.2.4","langs":""}